<?xml version="1.0" ?>
<node name="/Properties_Interface" xmlns:tp="http://telepathy.freedesktop.org/wiki/DbusSpec#extensions-v0">
  <tp:copyright> Copyright (C) 2005, 2006 Collabora Limited </tp:copyright>
  <tp:copyright> Copyright (C) 2005, 2006 Nokia Corporation </tp:copyright>
  <tp:copyright> Copyright (C) 2006 INdT </tp:copyright>
  <tp:license xmlns="http://www.w3.org/1999/xhtml">
    <p>This library is free software; you can redistribute it and/or
modify it under the terms of the GNU Lesser General Public
License as published by the Free Software Foundation; either
version 2.1 of the License, or (at your option) any later version.</p>

<p>This library is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
Library General Public License for more details.</p>

<p>You should have received a copy of the GNU Lesser General Public
License along with this library; if not, write to the Free Software
Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA</p>
  </tp:license>
  <interface name="org.freedesktop.Telepathy.Properties">
    <method name="GetProperties">
      <tp:docstring>
        Returns a dictionary of variants containing the current values of the
        given properties.
      </tp:docstring>
      <arg direction="in" name="properties" type="au">
        <tp:docstring>An array of property identifiers</tp:docstring>
      </arg>
      <arg direction="out" type="a(uv)">
        <tp:docstring>An array of structs containing:
          - integer identifiers
          - variant boxed values
        </tp:docstring>
      </arg>
      <tp:possible-errors>
        <tp:error name="org.freedesktop.Telepathy.Error.Disconnected"/>
        <tp:error name="org.freedesktop.Telepathy.Error.InvalidArgument">
          <tp:docstring>
            Some property identifier requested is invalid
          </tp:docstring>
        </tp:error>
        <tp:error name="org.freedesktop.Telepathy.Error.PermissionDenied">
          <tp:docstring>
            Some property requested does not have the PROPERTY_FLAG_READ flag
          </tp:docstring>
        </tp:error>
      </tp:possible-errors>
    </method>
    <method name="ListProperties">
      <tp:docstring>
        Returns a dictionary of the properties available on this channel.
      </tp:docstring>
      <arg direction="out" type="a(ussu)">
        <tp:docstring>
          An array of structs containing:
          <ul>
            <li>an integer identifier</li>
            <li>a string property name</li>
            <li>a string representing the D-Bus signature of this property</li>
            <li>a bitwise OR of the flags applicable to this property</li>
          </ul>
        </tp:docstring>
      </arg>
    </method>
    <signal name="PropertiesChanged">
      <tp:docstring>
        Emitted when the value of readable properties has changed.
      </tp:docstring>
      <arg name="properties" type="a(uv)">
      <tp:docstring>
        An array of structs containing:
        <ul>
          <li>integer identifiers</li>
          <li>variant boxed values</li>
        </ul>
      </tp:docstring>
      </arg>
    </signal>
    <signal name="PropertyFlagsChanged">
      <tp:docstring>
        Emitted when the flags of some room properties have changed.
      </tp:docstring>
      <arg name="properties" type="a(uu)">
        <tp:docstring>
          An array of structs containing:
          <ul>
            <li>integer identifiers</li>
            <li>a bitwise OR of the current flags</li>
          </ul>
        </tp:docstring>
      </arg>
    </signal>
    <method name="SetProperties">
      <tp:docstring xmlns="http://www.w3.org/1999/xhtml">
        <p>Takes a dictionary of variants containing desired values to set the given
        properties. In the case of any errors, no properties will be changed.
        When the changes have been acknowledged by the server, the
        PropertiesChanged signal will be emitted.</p>

        <p>All properties given must have the PROPERTY_FLAG_WRITE flag, or
        PermissionDenied will be returned. If any variants are of the wrong
        type, NotAvailable will be returned.  If any given property identifiers
        are invalid, InvalidArgument will be returned.</p>
      </tp:docstring>

      <arg direction="in" name="properties" type="a(uv)">
      <tp:docstring>
        A dictionary mapping integer identifiers to boxed values
      </tp:docstring>
      </arg>
      <tp:possible-errors>
        <tp:error name="org.freedesktop.Telepathy.Error.Disconnected"/>
        <tp:error name="org.freedesktop.Telepathy.Error.InvalidArgument"/>
        <tp:error name="org.freedesktop.Telepathy.Error.NotAvailable"/>
        <tp:error name="org.freedesktop.Telepathy.Error.PermissionDenied"/>
        <tp:error name="org.freedesktop.Telepathy.Error.NetworkError"/>
      </tp:possible-errors>
    </method>
    <tp:docstring xmlns="http://www.w3.org/1999/xhtml">
      <p>Interface for channels and other objects, to allow querying and setting
    properties. ListProperties returns which properties are valid for
    the given channel, including their type, and an integer handle used to
    refer to them in GetProperties, SetProperties, and the PropertiesChanged
    signal. The values are represented by D-Bus variant types, and are
    accompanied by flags indicating whether or not the property is readable or
    writable.</p>

    <p>Each property also has a flags value to indicate what methods are
    available. This is a bitwise OR of PropertyFlags values.</p>
    </tp:docstring>
    <tp:flags name="Property_Flags" value-prefix="Property_Flag">
      <tp:flag suffix="Read" value="1">
        <tp:docstring>The property can be read</tp:docstring>
      </tp:flag>
      <tp:flag suffix="Write" value="2">
        <tp:docstring>The property can be written</tp:docstring>
      </tp:flag>
    </tp:flags>
  </interface>
</node>
<!-- vim:set sw=2 sts=2 et ft=xml: -->
